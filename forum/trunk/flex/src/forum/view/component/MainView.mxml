<?xml version="1.0" encoding="utf-8"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:component="forum.view.component.*">
	
	<mx:Script>
		<![CDATA[
			import assets.vo.TopicVO;
			import assets.vo.RoomVO;
			import assets.vo.ForumVO;
			import mx.events.ListEvent;
			import mx.events.DataGridEvent;
			import mx.core.Application;
			import mx.managers.PopUpManager;
			
			public static const FORUM_SELECTED_EVENT:String = "FORUM_SELECTED_EVENT";
			
			[Bindable]
			public var forumListDataProvider:Object = new Object();
			[Bindable]
			public var roomListDataProvider:Object = new Object();
			[Bindable]
			public var topicListDataProvider:Object = new Object();
			
			public var selectedItem:Object = new Object();
			
			public var categoryPopUp:CategoryPopUp;
			
			private function onNewCategoryBtnClick():void {
				categoryPopUp = new CategoryPopUp();
				PopUpManager.addPopUp(categoryPopUp, Application.application as DisplayObject, true);
				PopUpManager.centerPopUp(categoryPopUp);
			}
			
			public function onDataGridItemClick(event:ListEvent):void {
				selectedItem = event.itemRenderer.data;
				if(selectedItem is ForumVO) {
					dispatchEvent( new Event(FORUM_SELECTED_EVENT) );
				}
				if(selectedItem is RoomVO) {
					
				}
				if(selectedItem is TopicVO) {
					
				}
				viewStack.selectedIndex++;
			}
			
		]]>
	</mx:Script>
	
	<mx:Button id="newCategoryBtn" label="Nova Categoria" click="onNewCategoryBtnClick()" />
	
	<mx:ViewStack id="viewStack" width="700">
		<mx:Canvas width="100%" height="100%">
			<mx:List id="forumList" dataProvider="{forumListDataProvider}" width="100%" height="100%" selectable="false">
				<mx:itemRenderer>
					<mx:Component>
						<mx:Panel title="{data.name}" width="100%">
							<mx:DataGrid id="dataGrid" width="100%" height="100%" dataProvider="{data.forumVOArray}"
											itemClick="parentDocument.onDataGridItemClick(event)">
								<mx:columns>
									<mx:DataGridColumn headerText="Título" dataField="name" />
									<mx:DataGridColumn headerText="Descrição" dataField="description" />
								</mx:columns>
							</mx:DataGrid>
						</mx:Panel>
					</mx:Component>
				</mx:itemRenderer>
			</mx:List>
		</mx:Canvas>
		
		<mx:Canvas width="100%" height="100%">
			<mx:List id="roomList" dataProvider="{roomListDataProvider}" width="100%" height="100%" selectable="false">
				<mx:itemRenderer>
					<mx:Component>
						<mx:Panel>
							<mx:DataGrid id="dataGrid" width="100%" height="100%" dataProvider="{data.roomVOArray}"
											itemClick="parentDocument.onDataGridItemClick(event)">
								<mx:columns>
									<mx:DataGridColumn headerText="Título" dataField="name" />
									<mx:DataGridColumn headerText="Descrição" dataField="description" />
								</mx:columns>
							</mx:DataGrid>
						</mx:Panel>
					</mx:Component>
				</mx:itemRenderer>
			</mx:List>
		</mx:Canvas>
		
		<mx:Canvas width="100%" height="100%">
			<mx:List id="topicList" dataProvider="{topicListDataProvider}" width="100%" height="100%" selectable="false">
				<mx:itemRenderer>
					<mx:Component>
						<mx:Panel>
							<mx:DataGrid id="dataGrid" width="100%" height="100%" dataProvider="{data.topicVOArray}"
											itemClick="parentDocument.onDataGridItemClick(event)">
								<mx:columns>
									<mx:DataGridColumn headerText="Título" dataField="name" />
									<mx:DataGridColumn headerText="Descrição" dataField="description" />
								</mx:columns>
							</mx:DataGrid>
						</mx:Panel>
					</mx:Component>
				</mx:itemRenderer>
			</mx:List>
		</mx:Canvas>
	</mx:ViewStack>
	
</mx:VBox>
