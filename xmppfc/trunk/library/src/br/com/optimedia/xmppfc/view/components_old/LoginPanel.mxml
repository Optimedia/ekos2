<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml" creationComplete="init()" title="Login">

	<mx:Script>
			<![CDATA[
				import mx.validators.Validator;
				import mx.managers.PopUpManager;
				import mx.core.Application;
				
				public static const ON_LOGIN_SUCESS:String = "onLoginSucess";
				
				private function init():void {
					PopUpManager.centerPopUp(this);
				}
				
				private function verifForm():void {
					var result:Array = Validator.validateAll([userValidator, passValidator, serverValidator]);
					btnLogin.enabled = (result.length==0);
				}
				
				public function showModal():void {
					PopUpManager.addPopUp(this, (Application.application as DisplayObject), true);
				}
				
				private function sucess():void {
					this.dispatchEvent(new Event(ON_LOGIN_SUCESS, true));
				}
				
			]]>
	</mx:Script>
	
	<mx:StringValidator id="userValidator" minLength="4" maxLength="12" required="true" 
		property="text" source="{txtUser}" triggerEvent="change" trigger="{txtUser}"/>
	<mx:StringValidator id="passValidator" minLength="4" maxLength="12" required="true" 
		property="text" source="{txtPassword}" triggerEvent="change" trigger="{txtUser}"/>
	<mx:StringValidator id="serverValidator" minLength="4" maxLength="12" required="true" 
		property="text" source="{txtServer}" triggerEvent="change" trigger="{txtUser}"/>
	
	<mx:Form width="100%" height="100%" >
		<mx:FormItem label="Username" required="true">
			<mx:TextInput id="txtUser" change="verifForm()"/>
		</mx:FormItem>
		<mx:FormItem label="Password" required="true">
			<mx:TextInput id="txtPassword" displayAsPassword="true" change="verifForm()"/>
		</mx:FormItem>
		<mx:FormItem label="Server" required="true">
			<mx:TextInput id="txtServer" change="verifForm()"/>
		</mx:FormItem>
	
	</mx:Form>
	<mx:HBox width="100%" horizontalAlign="center">
		<mx:Button id="btnLogin" label="Login" click="sucess()" enabled="false"/>
	</mx:HBox>
</mx:TitleWindow>